const supabaseUrl = 'https://sxboqdkfykngwfbsvtjs.supabase.co';
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4Ym9xZGtmeWtuZ3dmYnN2dGpzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzMTgwNjIsImV4cCI6MjA3MTg5NDA2Mn0.W_PWZ3TvAfOAPuk1BPJk7msiHeRKEMOorxPySya2uUs';
const supabase = supabase.createClient(supabaseUrl, supabaseKey );

document.addEventListener('DOMContentLoaded', () => {
    const app = document.getElementById('app');
    showLogin();
});

function showLogin() {
    const app = document.getElementById('app');
    app.innerHTML = `
        <div class="login-container">
            <h2>تسجيل الدخول</h2>
            <input type="email" id="email" placeholder="البريد الإلكتروني" required>
            <input type="password" id="password" placeholder="كلمة المرور" required>
            <button id="login-btn">دخول</button>
            <p id="error-message" class="error-message"></p>
            <p>ليس لديك حساب؟ <a href="#" id="show-signup">إنشاء حساب جديد</a></p>
        </div>
    `;
    document.getElementById('login-btn').addEventListener('click', handleLogin);
    document.getElementById('show-signup').addEventListener('click', (e) => { e.preventDefault(); showSignup(); });
}

function showSignup() {
    const app = document.getElementById('app');
    app.innerHTML = `
        <div class="login-container">
            <h2>إنشاء حساب جديد</h2>
            <input type="email" id="signup-email" placeholder="البريد الإلكتروني" required>
            <input type="password" id="signup-password" placeholder="كلمة المرور" required>
            <select id="signup-role">
                <option value="monitor">راصد</option>
                <option value="analyst">محلل</option>
            </select>
            <button id="signup-btn">إنشاء</button>
            <p id="error-message" class="error-message"></p>
            <p>لديك حساب بالفعل؟ <a href="#" id="show-login">تسجيل الدخول</a></p>
        </div>
    `;
    document.getElementById('signup-btn').addEventListener('click', handleSignup);
    document.getElementById('show-login').addEventListener('click', (e) => { e.preventDefault(); showLogin(); });
}
